---
# tasks file for NoviNano
- name: install prerequisites
  apt: name=aptitude update_cache=yes state=latest force_apt_get=yes

- name: clone git repo
  git:
    repo: "https://github.com/mplesha/NoviNano.git"
    dest: /home/ansible/NoviNano
    force: yes
- name: clear site directory
  shell: "rm -r /var/www/{{ http_host }}/*"

- name: move directory to web
  shell: "mv /home/ansible/NoviNano/mt/* /var/www/{{ http_host }}/"

- name: set rights for site folder
  file:
     path: /var/www/{{ http_host }}
     state: directory
     recurse: yes
     owner: www-data
     group: www-data

- name: Set permissions for directories
  shell: "/usr/bin/find /var/www/{{ http_host }} -type d -exec chmod 750 {} \\;"

- name: Set permissions for files
  shell: "/usr/bin/find /var/www/{{ http_host }} -type f -exec chmod 640 {} \\;"
